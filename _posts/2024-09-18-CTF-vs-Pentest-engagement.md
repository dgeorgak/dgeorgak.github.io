---
title: CTF vs Pentest engagement
date: 2024-09-18
categories: [CTF, Pentesting]
tags: [ctf, pentest, intro, enumeration]     # TAG names should always be lowercase
---

One of the common misconceptions for new people joining the pentesting community is that a CTF emulates a real pentest engagement.  And it makes sense, because a CTF is among the first things that an aspiring penetration tester tackles that gives them a sample of the experience that is a pentest.  This is what they know.  This is also what I used to know, before I got a real glimpse of the actual and professional process that is a penetration test.
And even though CTFs are one of the ways through which one can build up a skillset with regards to hacking and penetration testing (I will dwell upon this subject on another post), I am not challenging their usefulness here.  What I aim to build upon is how the ways of resolving a CTF challenge differ from the process of approaching a penetration test.  And when referring to CTFs I will be focusing on the black box challenges that the aspiring hacker goes through in order to break into a server (or a number of), gain a foothold, elevate privileges and obtain root or SYSTEM level access.

## a vulnerability game
You see, the process of a CTF is mainly following a pattern.  The attacker, initiating the attack externally, scans the network for potential targets.  More often than not, they are even provided with the IP of the target to begin with.  With the target IP address(es) at hand they can start scanning the target for exposed ports.  This will give them an idea of what they are dealing with.  Services, versions, OS, maybe a frontend to start exploring.  Through their findings they will gain an idea on how to approach the challenge, probable attack vectors, maybe a CVE that might prove useful.  The aim at this point is to find the vulnerability on the target that will help them gain a foothold, even if it's just a low privilege user (it usually is).  
A small sidenote here.  As CTFs are built as a techy-puzzle that the attacker needs to solve, the vulnerability is often just the single one that the CTF creator decided to integrate in their lab in order to make it "vulnerability X" specific.  This is an important aspect of CTFs and I will return to this point further down in my post.
After surveying the land, abusing a vulnerability and managing to gain access to the server, the CTF player will once more need to investigate their surroundings.  This time from an inside perspective.  They could check for sudo permissions, SUID or GUID misconfigurations, credentials/keys/tokens lying around somewhere in the system, services that they could not access from the outside, etc.  That will allow them to go down one of the two following paths with the aim to find the user flag.  Either move laterally to another user, or even another host, or elevate privileges.  
In the case of the former, they will have to pay their investigation dues all over again in order gain findings that the new user has access to and the previous one did not, or that the new host offers that were not available in their first one.  
In the case of the latter (and the latter one will eventually come at some point, even if the player needs to go through several lateral movements) upon successfully elevating privileges, it's game over.  You have access to the root flag.  "You win". 

## a security assessment
A penetration test does not start with the pentester immediately attacking the targets in order to break into their systems.  There is no certain way in, and the aim is not to find "the one" way in.  There are varying circumstances, terms, limitations, requirements.  There is an actual running company on the other side, and that is the target.  The priority of the penetration tester is to protect them.  Protect them through the assessment's findings, as well as during the assessment.
The penetration testers, together with the client, they scope the target and set the rules of engagement.  That might include specific time frame and time-slots for the engagement, rate limiting for automated tools, which parts/assets of the target must be tested and which are considered as out of bounds.  There will be a contact person appointed that the pentesters can reach out to in case of urgent matters (the assessment leading to unwanted disruptions on the target's operations, a critical finding that needs to be communicated immediately, etc).  There might be vendors that the client is using to provide their services, that could be defined as out of scope.  And it is only within the boundaries that these terms set that the penetration testers will operate upon.
Still, even with the target scoped out, the penetration testers need to confirm that the IPs belong to their client.  If any discrepancies are found they need to be communicated with the client to resolve any issues.
The assessment then can start with an external automated scan.  The penetration testers then can follow up with manually testing any promising findings, as well as points in the target that could prove to be critical if they are not properly secured (eg, login pages, file upload functionalities, API endpoints returning PII or S3 buckets containing them, etc).  
All of this however is done after taking into account the time limitations.  The assessment cannot run indefinitely.  There are specific start and end dates.  So the pentesting team need to prioritise according to the risk that each asset or feature poses.  There is an external facing login page that gives access to critical information?  That's a high priority.  There is an internal static webpage, totally isolated from outside the client's organisation?  Best to tackle other assets first.  
During a penetration test the pentesters will not necessarily be successful on breaking into the client's systems.  It is most common that they will not.  For the client to rest assured that their product and network has been thoroughly tested, the penetration testers might be provided with credentials of either low privileges, or even admin credentials.  Depending on the type of the target (webapp, infrastructure, cloud, mobile app) that might happen so that the pentesting team checks if as a low privileged user they cannot gain unauthorised access to higher level privileges, or even access to data of another same level user.
They might even be given access to the client's repository, for conducting code review, pinpointing the product's vulnerabilities even before they interact with it, making it a white-box engagement.
It is common to also check in platforms like haveIBeenPwned.com, deHashed.com or intelX.io for leaked credentials that concern the client, for which the client needs to be made aware of.
The point of the assessment is that every security issue, every vulnerability, every authorisation and authentication bypass, every concern is a finding.  And once everything is done, all of the findings need to go in a report as a deliverable to the client.  This needs to include an overview of the findings, their severity, the steps to reproduce them, and remediation suggestions.  It also common that more than one reports are delivered.  One for the technical department to go through, with elaborate steps to reproduce each issue, as well as remediation actions.  One for the management, with information that concerns them, like a high level explanation of the assessment, the number of findings, a short explanation and severity of each finding along with the risk that comes with it.  And depending on the client's organisation, a report might be prepared so that the client can share the findings with their own clients (without providing any critical details), as an affirmation that they commit to keeping a high standard of security.

## the game vs the assessment
By now it should be obvious that CTFs and penetration tests differ a lot.  
A CTF is meant to be beaten.  There is a way to win.  Often it is "the way you are supposed to win".  You just need to find it, and often you can take your time with it.  Then you usually gain points and/or bragging rights.  You also gain knowledge and experience of the specific vulnerability and attack vector you used in order to gain your flags.  If you want you can even write a walkthrough so that other people can go through each step you took, or you might decide not to bother with it.  It is not required, as the flags themselves are the actual proof that you beat the game.  
A penetration test does not involve "one way" to break into the client's systems.  You have to find all the weak spots in the client's assets and all of them are considered findings, no matter if they are critical or not.  You have to respect the boundaries that the client lays out in the rules of engagement.  Be that the time of the engagement, the access rights (or lack thereof), the scope, and all the needs and wants of the client.  And in the end you need to list all your findings, along with any details supporting them in a way that is useful to the client.  Because the report is what the client expects from the assessment.
